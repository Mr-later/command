redis的搭建说明


redis集群安装
启动顺序：
先哨兵sentinel再启动redis

1.启动命令
[redis@psjtbredis2 ~]$ cat startRedis.sh
/redis/redis-4.0.2/src/redis-server /redis/redis.conf
[redis@pztzjredis1 ~]$ cat startSentinel.sh
/redis/redis-4.0.2/src/redis-server /redis/sentinel.conf --sentinel



2.目录结构
[redis@pztzjredis1 ~]$ pwd
/redis
[redis@pztzjredis1 ~]$ ls
dump.rdb     redis-4.0.2.tar.gz  redis.conf  sentinel.conf  startRedis.sh
redis-4.0.2  redis-cli           redis.log   sentinel.log   startSentinel.sh



3.redis.conf的文件内容

3.1主的redis.conf文件内容
daemonize yes
pidfile "/var/run/redis_6379.pid"
logfile "/redis/redis.log"
save 900 1
save 300 10
save 60 10000
dir "/redis"

protected-mode no

3.2从的redis.conf文件内容加上如下内容
slaveof 10.0.40.110 6379

#说明：slaveof 主ip  主redis端口



4.sentinel.conf的文件内容
daemonize yes
port 26371
logfile "/redis/sentinel.log"
dir "/redis"
protected-mode no
sentinel monitor agency-redis 10.0.40.110 6379 1
# Generated by CONFIG REWRITE
maxclients 4064
sentinel down-after-milliseconds agency-redis 5000


#说明： 集群名称 主节点ip 主节点port
#sentinel monitor agency-redis 10.0.40.110 6379 1

